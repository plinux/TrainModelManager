{% extends "base.html" %}

{% block title %}选项维护 - 火车模型管理系统{% endblock %}

{% block content %}
<h1>选项维护</h1>

<div class="option-groups">
  <!-- 购买信息 -->
  <div class="option-group">
    <h3>购买信息</h3>
    <div class="tab-group">
      <button onclick="showTab('brands')" class="tab-btn">品牌</button>
      <button onclick="showTab('merchants')" class="tab-btn">商家</button>
    </div>
  </div>

  <!-- 铁路信息 -->
  <div class="option-group">
    <h3>铁路信息</h3>
    <div class="tab-group">
      <button onclick="showTab('power_types')" class="tab-btn active">动力类型</button>
      <button onclick="showTab('depots')" class="tab-btn">局段</button>
    </div>
  </div>

  <!-- 芯片信息 -->
  <div class="option-group">
    <h3>芯片信息</h3>
    <div class="tab-group">
      <button onclick="showTab('chip_interfaces')" class="tab-btn">芯片接口</button>
      <button onclick="showTab('chip_models')" class="tab-btn">芯片型号</button>
    </div>
  </div>

  <!-- 机车信息 -->
  <div class="option-group">
    <h3>机车信息</h3>
    <div class="tab-group">
      <button onclick="showTab('locomotive_series')" class="tab-btn">机车系列</button>
      <button onclick="showTab('locomotive_models')" class="tab-btn">机车型号</button>
    </div>
  </div>

  <!-- 车厢信息 -->
  <div class="option-group">
    <h3>车厢信息</h3>
    <div class="tab-group">
      <button onclick="showTab('carriage_series')" class="tab-btn">车厢系列</button>
      <button onclick="showTab('carriage_models')" class="tab-btn">车厢型号</button>
    </div>
  </div>

  <!-- 动车组信息 -->
  <div class="option-group">
    <h3>动车组信息</h3>
    <div class="tab-group">
      <button onclick="showTab('trainset_series')" class="tab-btn">动车组系列</button>
      <button onclick="showTab('trainset_models')" class="tab-btn">动车组车型</button>
    </div>
  </div>
</div>

<div class="tabs-container">

<div id="power_types" class="tab-content">
  <h2>动力类型</h2>
  <form method="POST">
    <input type="text" name="name" placeholder="新增动力类型" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for type in power_types %}
      <tr>
        <td>{{ type.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_power_type', id=type.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="brands" class="tab-content" style="display:none;">
  <h2>品牌</h2>
  <form method="POST">
    <input type="text" name="name" placeholder="新增品牌" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for brand in brands %}
      <tr>
        <td>{{ brand.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_brand', id=brand.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="merchants" class="tab-content" style="display:none;">
  <h2>商家</h2>
  <form method="POST">
    <input type="text" name="name" placeholder="新增商家" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for merchant in merchants %}
      <tr>
        <td>{{ merchant.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_merchant', id=merchant.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="depots" class="tab-content" style="display:none;">
  <h2>车辆段/机务段</h2>
  <form method="POST">
    <input type="text" name="name" placeholder="新增车辆段" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for depot in depots %}
      <tr>
        <td>{{ depot.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_depot', id=depot.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="chip_interfaces" class="tab-content" style="display:none;">
  <h2>芯片接口</h2>
  <form method="POST" action="{{ url_for('add_chip_interface') }}">
    <input type="text" name="name" placeholder="新增芯片接口" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for interface in chip_interfaces %}
      <tr>
        <td>{{ interface.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_chip_interface', id=interface.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="chip_models" class="tab-content" style="display:none;">
  <h2>芯片型号</h2>
  <form method="POST" action="{{ url_for('add_chip_model') }}">
    <input type="text" name="name" placeholder="新增芯片型号" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for model in chip_models %}
      <tr>
        <td>{{ model.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_chip_model', id=model.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="locomotive_series" class="tab-content" style="display:none;">
  <h2>机车系列</h2>
  <form method="POST" action="{{ url_for('add_locomotive_series') }}">
    <input type="text" name="name" placeholder="新增机车系列" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for series in locomotive_series %}
      <tr>
        <td>{{ series.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_locomotive_series', id=series.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="locomotive_models" class="tab-content" style="display:none;">
  <h2>机车型号</h2>
  <form method="POST" action="{{ url_for('add_locomotive_model') }}">
    <div class="form-row">
      <input type="text" name="name" placeholder="机车型号" required>
      <select name="series_id" required>
        <option value="">选择系列</option>
        {% for series in locomotive_series %}
        <option value="{{ series.id }}">{{ series.name }}</option>
        {% endfor %}
      </select>
      <select name="power_type_id" required>
        <option value="">选择动力类型</option>
        {% for type in power_types %}
        <option value="{{ type.id }}">{{ type.name }}</option>
        {% endfor %}
      </select>
    </div>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>系列</th>
        <th>动力类型</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for model in locomotive_models %}
      <tr>
        <td>{{ model.name }}</td>
        <td>{{ model.series.name if model.series else '-' }}</td>
        <td>{{ model.power_type.name if model.power_type else '-' }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_locomotive_model', id=model.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="carriage_series" class="tab-content" style="display:none;">
  <h2>车厢系列</h2>
  <form method="POST" action="{{ url_for('add_carriage_series') }}">
    <input type="text" name="name" placeholder="新增车厢系列" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for series in carriage_series %}
      <tr>
        <td>{{ series.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_carriage_series', id=series.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="carriage_models" class="tab-content" style="display:none;">
  <h2>车厢型号</h2>
  <form method="POST" action="{{ url_for('add_carriage_model') }}">
    <div class="form-row">
      <input type="text" name="name" placeholder="车厢型号" required>
      <select name="series_id" required>
        <option value="">选择系列</option>
        {% for series in carriage_series %}
        <option value="{{ series.id }}">{{ series.name }}</option>
        {% endfor %}
      </select>
      <select name="type" required>
        <option value="">选择类型</option>
        <option value="客车">客车</option>
        <option value="货车">货车</option>
      </select>
    </div>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>系列</th>
        <th>类型</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for model in carriage_models %}
      <tr>
        <td>{{ model.name }}</td>
        <td>{{ model.series.name if model.series else '-' }}</td>
        <td>{{ model.type }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_carriage_model', id=model.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="trainset_series" class="tab-content" style="display:none;">
  <h2>动车组系列</h2>
  <form method="POST" action="{{ url_for('add_trainset_series') }}">
    <input type="text" name="name" placeholder="新增动车组系列" required>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for series in trainset_series %}
      <tr>
        <td>{{ series.name }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_trainset_series', id=series.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="trainset_models" class="tab-content" style="display:none;">
  <h2>动车组车型</h2>
  <form method="POST" action="{{ url_for('add_trainset_model') }}">
    <div class="form-row">
      <input type="text" name="name" placeholder="动车组车型" required>
      <select name="series_id" required>
        <option value="">选择系列</option>
        {% for series in trainset_series %}
        <option value="{{ series.id }}">{{ series.name }}</option>
        {% endfor %}
      </select>
      <select name="power_type_id" required>
        <option value="">选择动力类型</option>
        {% for type in power_types %}
        <option value="{{ type.id }}">{{ type.name }}</option>
        {% endfor %}
      </select>
    </div>
    <button type="submit">添加</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>系列</th>
        <th>动力类型</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for model in trainset_models %}
      <tr>
        <td>{{ model.name }}</td>
        <td>{{ model.series.name if model.series else '-' }}</td>
        <td>{{ model.power_type.name if model.power_type else '-' }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete_trainset_model', id=model.id) }}">
            <button type="submit" class="btn-danger">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script src="/static/js/app.js"></script>

<style>
.tabs {
  margin-bottom: 1rem;
}

/* 选项分组样式 */
.option-groups {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.option-group {
  flex: 1;
  min-width: 200px;
}

.option-group h3 {
  margin-bottom: 0.75rem;
  font-size: 1.125rem;
  color: #333;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.tab-group {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}

.tabs-container {
  margin-top: 2rem;
}

.tab-btn {
  padding: 0.5rem 1rem;
  margin-right: 0.5rem;
  border: 2px solid #e9ecef;
  background-color: #f8f9fa;
  color: #495057;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
}

.tab-btn:hover {
  background-color: #e9ecef;
  border-color: #adb5bd;
}

.tab-btn.active {
  background-color: #0d6efd;
  color: white;
  border-color: #0a58ca;
  font-weight: 600;
}

.tab-content {
  padding: 1.5rem;
  border: 1px solid #dee2e6;
  border-radius: 8px;
  background-color: white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.tab-content h2 {
  margin-bottom: 1.25rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.tab-content form {
  margin-bottom: 1.5rem;
}

.tab-content table {
  margin-top: 1rem;
}

.tab-content table {
  margin-top: 1rem;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .option-groups {
    flex-direction: column;
    gap: 1rem;
  }

  .option-group {
    min-width: 100%;
  }

  .tab-group {
    justify-content: center;
  }

  .tab-btn {
    flex: 1 1 0 0;
    text-align: center;
    font-size: 0.875rem;
    padding: 0.5rem 0.75rem;
  }

  .tabs-container {
    margin-top: 1rem;
  }
}

@media (max-width: 480px) {
  .tab-btn {
    font-size: 0.8125rem;
    padding: 0.375rem 0.5rem;
  }
}
</style>
{% endblock %}
