{% extends "base.html" %}
{% from "macros/form.html" import autocomplete_field, text_field, date_field, price_field, scale_select, boolean_select %}

{% block title %}编辑先头车模型 - 火车模型管理系统{% endblock %}

{% block content %}
<h1>编辑先头车模型</h1>

<form id="locomotive-head-form" method="POST">
  <div class="form-grid-5">
    {{ autocomplete_field('model_id', '型号', trainset_models, required=true, value=locomotive_head.model_id, text_value=locomotive_head.model.name if locomotive_head.model else None) }}
    {{ scale_select(value=locomotive_head.scale) }}
    {{ text_field('special_color', '涂装', value=locomotive_head.special_color) }}
    {{ boolean_select('head_light', '头车灯', value=locomotive_head.head_light) }}
    {{ text_field('interior_light', '室内灯', value=locomotive_head.interior_light) }}
  </div>

  <div class="form-grid-5">
    {{ price_field(value=locomotive_head.price, field_class='col-2') }}
    {{ autocomplete_field('merchant_id', '购买商家', merchants, value=locomotive_head.merchant_id, text_value=locomotive_head.merchant.name if locomotive_head.merchant else None, field_class='col-2') }}
    {{ date_field('purchase_date', '购买日期', value=locomotive_head.purchase_date) }}
  </div>

  <div class="form-grid-5">
    {{ autocomplete_field('brand_id', '品牌', brands, required=true, value=locomotive_head.brand_id, text_value=locomotive_head.brand.name if locomotive_head.brand else None) }}
    {{ text_field('item_number', '货号', value=locomotive_head.item_number) }}
    {{ text_field('product_url', '产品地址', value=locomotive_head.product_url, field_class='col-3') }}
  </div>

  <div class="form-actions">
    <button type="submit">保存</button>
    <a href="{{ url_for('locomotive_head.locomotive_head') }}" class="btn-cancel">取消</a>
  </div>
</form>

{% if errors %}
<div class="error">
  {% for error in errors %}
  <p>{{ error }}</p>
  {% endfor %}
</div>
{% endif %}
{% endblock %}
